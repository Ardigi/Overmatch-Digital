# HashiCorp Vault Configuration Example
# Copy this file to .env.vault and update with your values
# Usage: docker-compose --env-file .env.vault -f docker-compose.yml -f docker-compose.vault.yml up

# =============================================================================
# VAULT CONFIGURATION
# =============================================================================

# Vault server configuration
VAULT_ADDR=http://localhost:8200
VAULT_API_ADDR=http://localhost:8200
VAULT_CLUSTER_ADDR=https://localhost:8201

# Development mode settings (DO NOT USE IN PRODUCTION)
VAULT_DEV_ROOT_TOKEN=soc-dev-token
VAULT_DEV_LISTEN_ADDRESS=0.0.0.0:8200

# Production vault configuration
# VAULT_CONFIG_PATH=/vault/config/vault.hcl
# VAULT_TLS_CERT_FILE=/vault/tls/vault.crt
# VAULT_TLS_KEY_FILE=/vault/tls/vault.key

# =============================================================================
# VAULT BACKEND CONFIGURATION
# =============================================================================

# Consul backend (for production HA setup)
CONSUL_ADDR=consul:8500
CONSUL_PATH=vault/
CONSUL_TOKEN=your-consul-token

# File backend (for single-node development)
VAULT_FILE_PATH=/vault/data

# =============================================================================
# VAULT AUTHENTICATION
# =============================================================================

# Root token (development only)
VAULT_ROOT_TOKEN=soc-dev-token

# AppRole authentication (production)
VAULT_ROLE_ID=your-role-id
VAULT_SECRET_ID=your-secret-id

# Kubernetes authentication (for K8s deployments)
VAULT_K8S_ROLE=soc-platform
VAULT_K8S_SA_TOKEN_PATH=/var/run/secrets/kubernetes.io/serviceaccount/token

# =============================================================================
# VAULT POLICIES AND SECRETS PATHS
# =============================================================================

# Base path for application secrets
VAULT_SECRET_PATH=secret/soc-platform

# Service-specific secret paths
VAULT_DATABASE_PATH=secret/database
VAULT_APPLICATION_PATH=secret/application
VAULT_EXTERNAL_PATH=secret/external
VAULT_MONITORING_PATH=secret/monitoring

# =============================================================================
# SERVICE AUTHENTICATION TOKENS
# =============================================================================

# Individual service tokens (production)
VAULT_AUTH_SERVICE_TOKEN=hvs.auth-service-token
VAULT_CLIENT_SERVICE_TOKEN=hvs.client-service-token
VAULT_AUDIT_SERVICE_TOKEN=hvs.audit-service-token
VAULT_EVIDENCE_SERVICE_TOKEN=hvs.evidence-service-token
VAULT_POLICY_SERVICE_TOKEN=hvs.policy-service-token
VAULT_CONTROL_SERVICE_TOKEN=hvs.control-service-token
VAULT_NOTIFICATION_SERVICE_TOKEN=hvs.notification-service-token
VAULT_REPORTING_SERVICE_TOKEN=hvs.reporting-service-token
VAULT_INTEGRATION_SERVICE_TOKEN=hvs.integration-service-token
VAULT_AI_SERVICE_TOKEN=hvs.ai-service-token

# =============================================================================
# VAULT UI AND MONITORING
# =============================================================================

# Vault UI configuration
VAULT_UI_ENABLED=true
VAULT_UI_ADDRESS=0.0.0.0:8200

# Metrics and telemetry
VAULT_TELEMETRY_PROMETHEUS_ENABLED=true
VAULT_TELEMETRY_PROMETHEUS_LISTEN_ADDRESS=0.0.0.0:9102

# Logging configuration
VAULT_LOG_LEVEL=INFO
VAULT_LOG_FORMAT=json

# =============================================================================
# ENCRYPTION AND SECURITY
# =============================================================================

# Auto-unseal configuration (production)
# AWS KMS
VAULT_AWSKMS_REGION=us-east-1
VAULT_AWSKMS_KEY_ID=your-kms-key-id

# Azure Key Vault
VAULT_AZUREKEYVAULT_VAULT_NAME=your-keyvault-name
VAULT_AZUREKEYVAULT_KEY_NAME=your-key-name

# Google Cloud KMS
VAULT_GCPKMS_PROJECT=your-gcp-project
VAULT_GCPKMS_REGION=us-central1
VAULT_GCPKMS_KEY_RING=your-keyring
VAULT_GCPKMS_CRYPTO_KEY=your-crypto-key

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================

# Override for local development
NODE_ENV=development
VAULT_DEV_MODE=true
VAULT_DISABLE_MLOCK=true

# Skip TLS verification (development only)
VAULT_SKIP_VERIFY=true

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# For production, uncomment and configure these:

# Enable TLS
# VAULT_TLS_DISABLE=false
# VAULT_LISTENER_TLS_CERT_FILE=/vault/tls/vault.crt
# VAULT_LISTENER_TLS_KEY_FILE=/vault/tls/vault.key
# VAULT_LISTENER_TLS_CLIENT_CA_FILE=/vault/tls/ca.crt

# High availability
# VAULT_CLUSTER_NAME=soc-vault-cluster
# VAULT_CLUSTER_DISABLE=false

# Performance tuning
# VAULT_MAX_REQUEST_SIZE=33554432
# VAULT_MAX_REQUEST_DURATION=90s
# VAULT_DEFAULT_LEASE_TTL=768h
# VAULT_MAX_LEASE_TTL=8760h

# =============================================================================
# INTEGRATION SETTINGS
# =============================================================================

# Docker Compose integration
COMPOSE_PROJECT_NAME=soc-platform
COMPOSE_FILE=docker-compose.yml:docker-compose.vault.yml

# Health check settings
VAULT_HEALTH_CHECK_INTERVAL=10s
VAULT_HEALTH_CHECK_TIMEOUT=3s
VAULT_HEALTH_CHECK_RETRIES=5

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Snapshot configuration (Enterprise)
# VAULT_SNAPSHOT_INTERVAL=24h
# VAULT_SNAPSHOT_RETAIN=30
# VAULT_SNAPSHOT_STORAGE=s3://your-backup-bucket/vault-snapshots

# =============================================================================
# EXAMPLES FOR DIFFERENT ENVIRONMENTS
# =============================================================================

# Development environment example:
# VAULT_ADDR=http://localhost:8200
# VAULT_DEV_ROOT_TOKEN=dev-token-123
# VAULT_DEV_MODE=true

# Staging environment example:
# VAULT_ADDR=https://vault-staging.company.com:8200
# VAULT_ROLE_ID=staging-role-id
# VAULT_SECRET_ID=staging-secret-id

# Production environment example:
# VAULT_ADDR=https://vault.company.com:8200
# VAULT_ROLE_ID=prod-role-id
# VAULT_SECRET_ID=prod-secret-id
# VAULT_NAMESPACE=soc-platform
# VAULT_TLS_CERT_FILE=/etc/ssl/certs/vault.crt

# =============================================================================
# NOTES
# =============================================================================

# 1. Never commit this file with real secrets to version control
# 2. Use different tokens/credentials for each environment
# 3. Rotate secrets regularly
# 4. Monitor Vault audit logs
# 5. Use least-privilege access policies
# 6. Enable auto-unseal in production
# 7. Configure proper backup and disaster recovery
# 8. Use TLS/SSL in production environments
# 9. Implement proper monitoring and alerting
# 10. Follow HashiCorp Vault security best practices